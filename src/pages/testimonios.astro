---
import BaseLayout from '../layouts/BaseLayout.astro';
import WhatsAppButton from '../components/WhatsAppButton.astro';
---

<BaseLayout title="Testimonios - MOVEO" description="Lee las historias de éxito de nuestros participantes y sus familias. Descubre cómo MOVEO ha transformado vidas.">
  <section class="py-16 lg:py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h1 class="text-4xl lg:text-5xl font-heading font-bold text-moveo-deep-blue mb-6">
          Historias de éxito
        </h1>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Conoce cómo MOVEO ha transformado la vida de adultos mayores y sus familias
        </p>
      </div>

      <!-- Featured Testimonial -->
      <div class="bg-gradient-to-br from-moveo-deep-blue to-moveo-bright-blue rounded-2xl p-8 lg:p-12 text-white mb-16">
        <div class="max-w-4xl mx-auto text-center">
          <svg class="w-12 h-12 text-moveo-yellow mx-auto mb-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h4v10h-10z" />
          </svg>
          <blockquote class="text-2xl lg:text-3xl font-heading italic mb-8">
            "Desde que mi mamá atiende en Moveo, recuperó fuerza y volvió a caminar sin ayuda."
          </blockquote>
          <p class="text-lg font-semibold text-moveo-yellow">— María Elena, hija de participante</p>
        </div>
      </div>

      <!-- Testimonials Carousel -->
      <div class="relative mb-16">
        <h2 class="text-2xl font-heading font-bold text-moveo-deep-blue dark:text-moveo-yellow mb-8 text-center">
          Lo que dicen nuestros participantes
        </h2>
        
        <!-- Carousel Container -->
        <div class="relative overflow-hidden rounded-xl">
          <div id="testimonial-track" class="flex transition-transform duration-500 ease-in-out">
            <!-- Testimonial 1 -->
            <div class="testimonial-slide w-full flex-shrink-0">
              <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 border border-gray-100 dark:border-gray-700 mx-4">
                <div class="flex items-center mb-6">
                  <div class="w-16 h-16 bg-moveo-yellow rounded-full flex items-center justify-center mr-4">
                    <svg class="w-8 h-8 text-moveo-deep-blue" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-xl font-semibold text-moveo-deep-blue dark:text-moveo-yellow">Carmen González, 72 años</h3>
                    <p class="text-gray-500 dark:text-gray-400">Participante desde hace 8 meses</p>
                  </div>
                </div>
                <blockquote class="text-lg text-gray-600 dark:text-gray-300 italic mb-6 leading-relaxed">
                  "Antes tenía miedo de salir sola porque me sentía insegura al caminar. 
                  Ahora tengo más equilibrio y confianza. Incluso volví a bailar en las 
                  fiestas familiares. Los ejercicios son suaves pero efectivos."
                </blockquote>
                <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                  <svg class="w-4 h-4 text-moveo-yellow mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                  </svg>
                  Clases presenciales grupales
                </div>
              </div>
            </div>

            <!-- Testimonial 2 -->
            <div class="testimonial-slide w-full flex-shrink-0">
              <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 border border-gray-100 dark:border-gray-700 mx-4">
                <div class="flex items-center mb-6">
                  <div class="w-16 h-16 bg-moveo-purple rounded-full flex items-center justify-center mr-4">
                    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-xl font-semibold text-moveo-deep-blue dark:text-moveo-yellow">Roberto Méndez, 68 años</h3>
                    <p class="text-gray-500 dark:text-gray-400">Participante desde hace 1 año</p>
                  </div>
                </div>
                <blockquote class="text-lg text-gray-600 dark:text-gray-300 italic mb-6 leading-relaxed">
                  "Después del accidente pensé que nunca volvería a ser independiente. 
                  Con MOVEO he recuperado mucha movilidad y, lo más importante, 
                  he encontrado nuevos amigos que entienden mi proceso. Es como una familia."
                </blockquote>
                <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                  <svg class="w-4 h-4 text-moveo-yellow mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                  </svg>
                  Sesiones grupales personalizadas
                </div>
              </div>
            </div>

            <!-- Testimonial 3 -->
            <div class="testimonial-slide w-full flex-shrink-0">
              <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 border border-gray-100 dark:border-gray-700 mx-4">
                <div class="flex items-center mb-6">
                  <div class="w-16 h-16 bg-moveo-accent-blue rounded-full flex items-center justify-center mr-4">
                    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-xl font-semibold text-moveo-deep-blue dark:text-moveo-yellow">Lucía Ramírez, 75 años</h3>
                    <p class="text-gray-500 dark:text-gray-400">Clases a domicilio desde hace 6 meses</p>
                  </div>
                </div>
                <blockquote class="text-lg text-gray-600 dark:text-gray-300 italic mb-6 leading-relaxed">
                  "No podía salir de casa por problemas de movilidad. El profesional 
                  viene a mi hogar y hemos logrado que pueda levantarme y moverme 
                  mejor. Mi familia está muy agradecida. Ahora puedo cocinar de pie otra vez."
                </blockquote>
                <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                  <svg class="w-4 h-4 text-moveo-yellow mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                  </svg>
                  Clases a domicilio
                </div>
              </div>
            </div>

            <!-- Testimonial 4 -->
            <div class="testimonial-slide w-full flex-shrink-0">
              <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 border border-gray-100 dark:border-gray-700 mx-4">
                <div class="flex items-center mb-6">
                  <div class="w-16 h-16 bg-moveo-accent-red rounded-full flex items-center justify-center mr-4">
                    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-xl font-semibold text-moveo-deep-blue dark:text-moveo-yellow">Jorge Peña, hijo de participante</h3>
                    <p class="text-gray-500 dark:text-gray-400">Familiar de Esperanza Peña, 78 años</p>
                  </div>
                </div>
                <blockquote class="text-lg text-gray-600 dark:text-gray-300 italic mb-6 leading-relaxed">
                  "Mamá estaba muy deprimida después de la muerte de papá. 
                  MOVEO no solo la ayudó físicamente, sino que le devolvió 
                  las ganas de vivir. Ahora está más activa que nunca y hasta salimos a caminar juntos."
                </blockquote>
                <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                  <svg class="w-4 h-4 text-moveo-yellow mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                  </svg>
                  Testimonio familiar
                </div>
              </div>
            </div>

            <!-- Testimonial 5 -->
            <div class="testimonial-slide w-full flex-shrink-0">
              <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 border border-gray-100 dark:border-gray-700 mx-4">
                <div class="flex items-center mb-6">
                  <div class="w-16 h-16 bg-gradient-to-br from-moveo-purple to-moveo-bright-blue rounded-full flex items-center justify-center mr-4">
                    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-xl font-semibold text-moveo-deep-blue dark:text-moveo-yellow">Ana María Torres, 69 años</h3>
                    <p class="text-gray-500 dark:text-gray-400">Participante desde hace 10 meses</p>
                  </div>
                </div>
                <blockquote class="text-lg text-gray-600 dark:text-gray-300 italic mb-6 leading-relaxed">
                  "Tengo diabetes y problemas de equilibrio desde hace años. Con MOVEO aprendí ejercicios 
                  que puedo hacer en casa y mi control de azúcar ha mejorado mucho. Los profesionales 
                  entienden perfectamente mis limitaciones."
                </blockquote>
                <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                  <svg class="w-4 h-4 text-moveo-yellow mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                  </svg>
                  Programa personalizado
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Navigation Controls -->
        <div class="flex items-center justify-center mt-8 space-x-4">
          <!-- Previous Button -->
          <button 
            id="prev-testimonial"
            class="p-3 rounded-full bg-moveo-deep-blue dark:bg-moveo-purple text-white hover:bg-blue-800 dark:hover:bg-purple-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            aria-label="Testimonial anterior"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
          </button>

          <!-- Dots Indicator -->
          <div id="carousel-dots" class="flex space-x-2">
            <!-- Dots will be generated by JavaScript -->
          </div>

          <!-- Next Button -->
          <button 
            id="next-testimonial"
            class="p-3 rounded-full bg-moveo-deep-blue dark:bg-moveo-purple text-white hover:bg-blue-800 dark:hover:bg-purple-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            aria-label="Siguiente testimonial"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>
      </div>

      <!-- Impact Stats -->
      <div class="bg-gray-50 rounded-xl p-8 lg:p-12 mb-16">
        <h2 class="text-3xl font-heading font-bold text-moveo-deep-blue mb-8 text-center">
          Nuestro impacto en números
        </h2>
        <div class="grid md:grid-cols-3 gap-8 text-center">
          <div>
            <div class="text-4xl font-bold text-moveo-purple mb-2">95%</div>
            <p class="text-lg text-gray-600">de participantes reportan mejora en movilidad</p>
          </div>
          <div>
            <div class="text-4xl font-bold text-moveo-accent-blue mb-2">87%</div>
            <p class="text-lg text-gray-600">experimentan reducción significativa del dolor</p>
          </div>
          <div>
            <div class="text-4xl font-bold text-moveo-yellow mb-2">92%</div>
            <p class="text-lg text-gray-600">se sienten más seguros y confiados</p>
          </div>
        </div>
        <p class="text-center text-sm text-gray-500 mt-6">
          *Datos basados en encuestas a participantes después de 6 meses de programa
        </p>
      </div>

      <!-- Note about testimonials -->
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-16">
        <div class="flex items-start">
          <svg class="w-6 h-6 text-blue-600 mt-1 mr-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <div>
            <h3 class="text-lg font-semibold text-blue-800 mb-2">Nota sobre testimonios</h3>
            <p class="text-blue-700">
              Estos testimonios reflejan experiencias reales de nuestros participantes y sus familias. 
              Los nombres han sido modificados para proteger la privacidad. Los resultados pueden 
              variar según las condiciones individuales de cada persona.
            </p>
          </div>
        </div>
      </div>

      <!-- CTA -->
      <div class="text-center">
        <h2 class="text-3xl font-heading font-bold text-moveo-deep-blue mb-6">
          ¿Quieres ser parte de estas historias de éxito?
        </h2>
        <p class="text-xl text-gray-600 mb-8">
          Agenda tu consulta gratuita y comienza tu propia transformación.
        </p>
        <WhatsAppButton class="text-lg px-8 py-4" />
      </div>
    </div>
  </section>

  <script>
    // Testimonials Carousel functionality
    document.addEventListener('DOMContentLoaded', function() {
      const track = document.getElementById('testimonial-track');
      const slides = track.querySelectorAll('.testimonial-slide');
      const prevButton = document.getElementById('prev-testimonial');
      const nextButton = document.getElementById('next-testimonial');
      const dotsContainer = document.getElementById('carousel-dots');
      
      let currentSlide = 0;
      const totalSlides = slides.length;
      let autoScrollTimer;

      // Generate dots
      function createDots() {
        dotsContainer.innerHTML = '';
        for (let i = 0; i < totalSlides; i++) {
          const dot = document.createElement('button');
          dot.className = 'w-3 h-3 rounded-full transition-colors duration-300';
          dot.setAttribute('aria-label', `Ir al testimonio ${i + 1}`);
          dot.addEventListener('click', () => goToSlide(i));
          dotsContainer.appendChild(dot);
        }
        updateDots();
      }

      // Update dot states
      function updateDots() {
        const dots = dotsContainer.querySelectorAll('button');
        dots.forEach((dot, index) => {
          if (index === currentSlide) {
            dot.className = 'w-3 h-3 rounded-full bg-moveo-deep-blue dark:bg-moveo-yellow transition-colors duration-300';
          } else {
            dot.className = 'w-3 h-3 rounded-full bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors duration-300';
          }
        });
      }

      // Update carousel position
      function updateCarousel() {
        const translateX = -currentSlide * 100;
        track.style.transform = `translateX(${translateX}%)`;
        updateDots();
        
        // Update button states
        prevButton.disabled = currentSlide === 0;
        nextButton.disabled = currentSlide === totalSlides - 1;
      }

      // Go to specific slide
      function goToSlide(slideIndex) {
        if (slideIndex >= 0 && slideIndex < totalSlides) {
          currentSlide = slideIndex;
          updateCarousel();
          resetAutoScroll();
        }
      }

      // Next slide
      function nextSlide() {
        if (currentSlide < totalSlides - 1) {
          currentSlide++;
        } else {
          currentSlide = 0; // Loop back to first slide
        }
        updateCarousel();
        resetAutoScroll();
      }

      // Previous slide
      function prevSlide() {
        if (currentSlide > 0) {
          currentSlide--;
        } else {
          currentSlide = totalSlides - 1; // Loop to last slide
        }
        updateCarousel();
        resetAutoScroll();
      }

      // Auto scroll functionality
      function startAutoScroll() {
        autoScrollTimer = setInterval(() => {
          nextSlide();
        }, 5000); // Change slide every 5 seconds
      }

      function stopAutoScroll() {
        clearInterval(autoScrollTimer);
      }

      function resetAutoScroll() {
        stopAutoScroll();
        startAutoScroll();
      }

      // Event listeners
      nextButton.addEventListener('click', nextSlide);
      prevButton.addEventListener('click', prevSlide);

      // Pause auto-scroll on hover
      track.addEventListener('mouseenter', stopAutoScroll);
      track.addEventListener('mouseleave', startAutoScroll);

      // Keyboard navigation
      document.addEventListener('keydown', function(e) {
        if (document.activeElement && document.activeElement.closest('.testimonial-slide')) {
          if (e.key === 'ArrowLeft') {
            e.preventDefault();
            prevSlide();
          } else if (e.key === 'ArrowRight') {
            e.preventDefault();
            nextSlide();
          }
        }
      });

      // Touch/swipe support
      let startX = 0;
      let isDragging = false;

      track.addEventListener('touchstart', function(e) {
        startX = e.touches[0].clientX;
        isDragging = true;
        stopAutoScroll();
      });

      track.addEventListener('touchmove', function(e) {
        if (!isDragging) return;
        e.preventDefault();
      });

      track.addEventListener('touchend', function(e) {
        if (!isDragging) return;
        isDragging = false;
        
        const endX = e.changedTouches[0].clientX;
        const diff = startX - endX;
        
        // Minimum swipe distance
        if (Math.abs(diff) > 50) {
          if (diff > 0) {
            nextSlide();
          } else {
            prevSlide();
          }
        }
        
        resetAutoScroll();
      });

      // Initialize carousel
      createDots();
      updateCarousel();
      startAutoScroll();

      // Handle visibility change (pause when tab is not active)
      document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
          stopAutoScroll();
        } else {
          startAutoScroll();
        }
      });
    });
  </script>
</BaseLayout>